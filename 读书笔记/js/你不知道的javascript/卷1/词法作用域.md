### 词法阶段

- 特点
  - 由写代码时变量和块级作用域的位置决定
  - 多数情况下词法分析器会保证作用域不变
- 查找
  - 作用域查找会在找到第一个匹配的标识符时停止（遮蔽效应，全局变量是例外，可以通过window.name访问到）

- 欺骗词法
  - eval（函数）
    - 特点
      - 可以执行string，并将其内容视为书写与此位置的代码，简言之，通过执行string修改eval所在词法作用域
      - 严格模式下eval会失效，因为eval将会有自己的词法作用域
    - 参数
      - string
  - with
    - 特点
      - 根据传递的对象创建一个全新的词法作用域
      - with块内部的var什么并不会被限制在这个块的作用域中，而是被添加到with所处的函数作用域中
    - 缺陷
      - 很容易污染全局变量，因为当块中访问赋值了一个对象不具有的属性，在非严格模式下，LHS会访问全局，全局若无，则隐式创建一个全局变量
  - 总结
    - 欺骗词法的方法会导致JS性能下降，应尽可能避免
      - 原因：JS引擎在编译阶段会进行数项的性能优化，其中有些优化依赖于对代码词法的静态分析，预先确定变量和函数的定义未知，以执行时快速找到标识符；但如果出现eval或with，引擎就会不再进行优化；